---
const allPosts = await Astro.glob('../pages/posts/*.md');
import Headingsofblog from "../components/Headingsofblog.astro";
// 获取所有 Markdown 文件


---



<div class="pl-3 mt-3 text-sm 
max-h-screen lg:mt-0 lg:px-6">
  <h2 class="text-xl font-bold text-secondary-900">目录导航 On this page</h2>
    <div class="mt-3 text-sm">
      <ul class="space-y-5 leading-normal">
          <!-- 实现了右侧导航栏读取当前md的目录问题 -->
          {allPosts.map((post, index) => {
            let currentPath = Astro.url.pathname;
              if (currentPath.endsWith('index.html')) {
                currentPath = currentPath.slice(0, -'index.html'.length);
              }
              if (currentPath.endsWith('/')) {
                currentPath = currentPath.slice(0, -1);
              }
            if (post.url === currentPath){
              const headings = post.getHeadings();
              
          
            //   return headings.map((heading) => (
            //   <Headingsofblog 
            //     url={`#${heading.slug}`} 
            //     getHeadings={heading.text} 
            //   />
            // ))

            return headings.map((heading) => (
                  <Headingsofblog 
                url={`#${heading.slug}`} 
                getHeadings={heading.text} />
                  ))

              // headings.map((ih) =>{
              //   if (1<2){
              //     return <Headingsofblog 
              //   url={`#${ih.slug}`} 
              //   getHeadings={ih.text} />

              //   //   return headings.map((heading) => (
              //   //   <Headingsofblog 
              //   // url={`#${heading.slug}`} 
              //   // getHeadings={heading.text} />
              //   //   ))


              //   }
              // })

            
            };         
          })} 

          
          
    </ul>
    </div>
</div>


<script>
// console.log(Astro.url.pathname)

</script>